<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تسجيل حساب مقدم خدمة - نطاق</title>
    <!-- الخطوط -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/svg+xml" href="images/icon.png">
    <link rel="icon" type="image/png" href="images/icon.png">
    <link rel="apple-touch-icon" href="images/icon.png">
    <meta name="theme-color" content="#6f8051">
    <style>
        :root {
            --primary-color: #6f8051;
            --primary-light: #8a9a6c;
            --primary-dark: #5a6a41;
            --secondary-color: #919663;
            --secondary-light: #a8b57a;
            --secondary-dark: #7a864f;
            --background-light: #ffffff;
            --background-dark: #f8f9fa;
            --accent-light: #f5f5f5;
            --accent-dark: #e0e0e0;
            --text-dark: #333333;
            --text-light: #666666;
            --text-lighter: #999999;
            --white: #ffffff;
            --black: #000000;
            --error: #e74c3c;
            --error-light: #f8d7da;
            --success: #2ecc71;
            --success-light: #d4edda;
            --warning: #f1c40f;
            --warning-light: #fff3cd;
            --info: #3498db;
            --info-light: #d1ecf1;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            --shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            --spacing-unit: 24px;
            --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
        }

        body {
            background-color: var(--background-dark);
        }

        .register-container {
            max-width: 800px;
            margin: 60px auto;
            padding: 0 var(--spacing-unit);
        }

        .register-card {
            background: var(--white);
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: calc(var(--spacing-unit) * 2);
            border: 1px solid rgba(111, 128, 81, 0.1);
        }

        .register-header {
            text-align: center;
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .register-title {
            font-size: 2.4rem;
            color: var(--primary-color);
            margin-bottom: var(--spacing-unit);
            font-weight: 700;
        }

        .register-subtitle {
            color: var(--text-light);
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .progress-bar {
            background: var(--accent-light);
            height: 8px;
            border-radius: 4px;
            margin-bottom: calc(var(--spacing-unit) * 1.5);
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            transition: width 0.4s ease;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: calc(var(--spacing-unit) * 2);
            padding: 0 var(--spacing-unit);
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            color: var(--text-light);
            position: relative;
            flex: 1;
        }

        .progress-step::before {
            content: '';
            width: 40px;
            height: 40px;
            background: var(--accent-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-light);
            transition: var(--transition);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .progress-step.active {
            color: var(--primary-color);
        }

        .progress-step.active::before {
            background: var(--gradient-primary);
            color: var(--white);
            box-shadow: 0 4px 12px rgba(111, 128, 81, 0.2);
        }

        .progress-step.completed::before {
            background: var(--gradient-primary);
            color: var(--white);
        }

        .progress-step.completed::after {
            content: '\f00c';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            top: 0;
            color: var(--white);
        }

        .form-section {
            display: none;
            animation: fadeIn 0.3s ease;
            background: var(--white);
            padding: calc(var(--spacing-unit) * 1.5);
            border-radius: 16px;
            border: 1px solid var(--accent-dark);
            margin-bottom: var(--spacing-unit);
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02);
        }

        .form-section.active {
            display: block;
        }

        .form-section:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-2px);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: calc(var(--spacing-unit) * 2);
            gap: var(--spacing-unit);
        }

        .nav-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
            flex: 1;
            justify-content: center;
        }

        .prev-btn {
            background: var(--accent-light);
            color: var(--text-dark);
        }

        .next-btn {
            background: var(--gradient-primary);
            color: var(--white);
        }

        .nav-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .nav-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .section-title {
            font-size: 1.4rem;
            color: var(--primary-color);
            margin-bottom: calc(var(--spacing-unit) * 1.5);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }

        .section-title i {
            color: var(--primary-color);
            font-size: 1.6rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-unit);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            color: var(--text-dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-input,
        .form-select,
        .form-textarea {
            background: var(--white);
            border: 2px solid var(--accent-dark);
            border-radius: 12px;
            padding: 16px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(111, 128, 81, 0.05);
            outline: none;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload {
            background: var(--accent-light);
            border: 2px dashed var(--accent-dark);
            border-radius: 16px;
            padding: calc(var(--spacing-unit) * 1.5);
            text-align: center;
            transition: var(--transition);
        }

        .file-upload:hover {
            border-color: var(--primary-color);
            background: var(--white);
            box-shadow: var(--shadow);
        }

        .file-upload i {
            font-size: 2.8rem;
            color: var(--primary-color);
            margin-bottom: var(--spacing-unit);
        }

        .location-input {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .location-input .form-input {
            flex: 1;
            background-color: var(--accent-light);
            cursor: not-allowed;
        }

        .location-btn {
            padding: 16px 24px;
            background: var(--gradient-primary);
            color: var(--white);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: var(--transition);
            font-size: 1.1rem;
            white-space: nowrap;
            min-width: 160px;
            justify-content: center;
        }

        .location-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(111, 128, 81, 0.2);
        }

        .location-btn.loading {
            background: var(--accent-dark);
            cursor: wait;
            transform: none;
            box-shadow: none;
        }

        .location-btn.loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .location-btn i {
            font-size: 1.2rem;
        }

        .location-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .location-btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .location-input .form-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(111, 128, 81, 0.05);
        }

        .location-input .form-input::placeholder {
            color: var(--text-lighter);
        }

        .location-input .form-input:disabled {
            background-color: var(--accent-light);
            cursor: not-allowed;
            opacity: 0.8;
        }

        .login-link {
            text-align: center;
            margin-top: calc(var(--spacing-unit) * 1.5);
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .login-link a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .login-link a:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }

        .form-error {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 6px;
            display: none;
        }

        .form-group.error .form-input,
        .form-group.error .form-select,
        .form-group.error .form-textarea {
            border-color: #e74c3c;
        }

        .form-group.error .form-error {
            display: block;
        }

        .form-label-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .password-toggle-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .password-toggle-container input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
            order: 2;
        }

        .password-toggle-container label {
            color: var(--text-light);
            font-size: 0.9rem;
            cursor: pointer;
            order: 1;
        }

        @media (max-width: 768px) {
            .register-container {
                margin: 30px auto;
                padding: 0 16px;
            }

            .register-card {
                padding: var(--spacing-unit);
            }

            .register-title {
                font-size: 1.8rem;
            }

            .progress-steps {
                flex-direction: column;
                gap: var(--spacing-unit);
                padding: 0;
            }

            .progress-step {
                flex-direction: row;
                justify-content: flex-start;
            }

            .progress-step::before {
                margin-left: 12px;
            }

            .form-navigation {
                flex-direction: column;
                gap: 12px;
            }

            .nav-btn {
                width: 100%;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        .password-strength {
            margin-top: 12px;
            font-size: 0.9rem;
            background: var(--accent-light);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--accent-dark);
        }

        .password-requirements {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .password-requirements li {
            color: var(--text-lighter);
            margin: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .password-requirements li i {
            font-size: 0.9rem;
            width: 16px;
            text-align: center;
        }

        .password-requirements li.valid {
            color: var(--success);
            font-weight: 500;
        }

        .password-requirements li.invalid {
            color: var(--error);
        }

        .password-requirements li:first-child {
            margin-top: 0;
        }

        .password-requirements li:last-child {
            margin-bottom: 0;
        }

        .password-requirements li.valid i {
            animation: checkmark 0.3s ease-in-out;
        }

        @keyframes checkmark {
            0% {
                transform: scale(0);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }

        #locationStatus {
            margin-top: 8px;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }
    </style>
</head>

<body>
    

    <!-- Register Section -->
    <section class="register-container">
        <div class="register-card">
            <div class="register-header">
                <h1 class="register-title">تسجيل حساب مقدم خدمة</h1>
                <p class="register-subtitle">انضم إلى مجتمع مقدمي الخدمات في نطاق وابدأ في تقديم خدماتك</p>
            </div>

            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" style="width: 25%"></div>
            </div>

            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="progress-step active" data-step="1">
                    <span>المعلومات الشخصية</span>
                </div>
                <div class="progress-step" data-step="2">
                    <span>معلومات العمل</span>
                </div>
                <div class="progress-step" data-step="3">
                    <span>الخدمات</span>
                </div>
                <div class="progress-step" data-step="4">
                    <span>الوثائق</span>
                </div>
            </div>

            <form class="register-form" id="registerForm">
                <!-- Personal Information -->
                <div class="form-section active" data-section="1">
                    <h2 class="section-title">
                        <i class="fas fa-user"></i>
                        المعلومات الشخصية
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label required-field">الاسم الكامل</label>
                            <input type="text" class="form-input" id="fullName" required>
                            <div class="form-error">يرجى إدخال الاسم الكامل باللغة العربية</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">البريد الإلكتروني</label>
                            <input type="email" class="form-input" required>
                            <div class="form-error">يرجى إدخال بريد إلكتروني صحيح</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">رقم الجوال</label>
                            <input type="tel" class="form-input" required>
                            <div class="form-error">يرجى إدخال رقم جوال صحيح</div>
                        </div>
                        <div class="form-group">
                            <div class="form-label-container">
                                <label class="form-label required-field">كلمة المرور</label>
                                <div class="password-toggle-container">
                                    <label for="showPassword">عرض كلمة المرور</label>
                                    <input type="checkbox" id="showPassword" class="password-toggle">
                                </div>
                            </div>
                            <input type="password" class="form-input" id="password" required>
                            <div class="password-strength">
                                <ul class="password-requirements">
                                    <li id="length-check"><i class="fas fa-circle"></i> 8 أحرف على الأقل</li>
                                    <li id="uppercase-check"><i class="fas fa-circle"></i> حرف كبير واحد على الأقل</li>
                                    <li id="lowercase-check"><i class="fas fa-circle"></i> حرف صغير واحد على الأقل</li>
                                    <li id="number-check"><i class="fas fa-circle"></i> رقم واحد على الأقل</li>
                                </ul>
                            </div>
                            <div class="form-error">كلمة المرور يجب أن تحتوي على 8 أحرف على الأقل، حرف كبير، حرف صغير، ورقم</div>
                        </div>
                        <div class="form-group">
                            <div class="form-label-container">
                                <label class="form-label required-field">تأكيد كلمة المرور</label>
                                <div class="password-toggle-container">
                                    <input type="checkbox" id="showConfirmPassword" class="password-toggle">
                                    <label for="showConfirmPassword">عرض كلمة المرور</label>
                                </div>
                            </div>
                            <input type="password" class="form-input" id="confirmPassword" required>
                            <div class="form-error">كلمات المرور غير متطابقة</div>
                        </div>
                    </div>
                </div>

                <!-- Work Information -->
                <div class="form-section" data-section="2">
                    <h2 class="section-title">
                        <i class="fas fa-briefcase"></i>
                        معلومات العمل
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label required-field">اسم المنشأة</label>
                            <input type="text" class="form-input" required>
                            <div class="form-error">يرجى إدخال اسم المنشأة</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">نوع المنشأة</label>
                            <select class="form-select" required>
                                <option value="">اختر نوع المنشأة</option>
                                <option value="individual">فرد</option>
                                <option value="company">شركة</option>
                                <option value="establishment">منشأة</option>
                            </select>
                            <div class="form-error">يرجى اختيار نوع المنشأة</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">السجل التجاري <span style="color: var(--text-lighter); font-size: 0.9rem;">(اختياري)</span></label>
                            <input type="text" class="form-input" id="cr">
                            <div class="form-error">يرجى إدخال رقم السجل التجاري</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">العنوان</label>
                            <input type="text" class="form-input" id="address" placeholder="أدخل عنوانك بالتفصيل" required>
                            <div class="form-error">يرجى إدخال العنوان</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">الموقع الجغرافي</label>
                            <div class="location-input">
                                <input type="text" class="form-input" id="location" readonly placeholder="اضغط على زر تحديد الموقع" required>
                                <button type="button" class="location-btn" id="getLocation">
                                    <i class="fas fa-location-arrow"></i>
                                    <span>تحديد الموقع</span>
                                </button>
                            </div>
                            <input type="hidden" name="latitude" id="latitude">
                            <input type="hidden" name="longitude" id="longitude">
                            <small id="locationStatus" style="display: block; margin-top: 5px; font-size: 0.85rem; color: var(--text-light);"></small>
                            <div class="form-error">يرجى تحديد الموقع الجغرافي</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">الموقع الإلكتروني <span style="color: var(--text-lighter); font-size: 0.9rem;">(اختياري)</span></label>
                            <input type="url" class="form-input" placeholder="https://example.com">
                            <div class="form-error">يرجى إدخال رابط موقع صحيح</div>
                        </div>
                    </div>
                </div>

                <!-- Services -->
                <div class="form-section" data-section="3">
                    <h2 class="section-title">
                        <i class="fas fa-tools"></i>
                        الخدمات
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label required-field">القسم الرئيسي</label>
                            <select class="form-select" id="mainCategory" required>
                                <option value="">اختر القسم الرئيسي</option>
                                <option value="food">طعام</option>
                                <option value="clothes">ملابس</option>
                                <option value="shoes">أحذية</option>
                                <option value="photography">تصوير فوتوغرافى</option>
                                <option value="maintenance">صيانة</option>
                                <option value="mobile">موبايل</option>
                                <option value="computer">كمبيوتر</option>
                                <option value="education">تعليم</option>
                                <option value="wedding">لوازم أفراح</option>
                                <option value="paint">محلات بويات ودهانات</option>
                                <option value="medical">القطاع الطبي</option>
                                <option value="craftsman">صنايعي</option>
                                <option value="maleBarber">كوافير رجالي</option>
                                <option value="femaleBarber">كوافير حريمي</option>
                                <option value="libraries">مكتبات</option>
                                <option value="dairy">منتجات ألبان فلاحية</option>
                                <option value="gifts">هدايا</option>
                                <option value="handicrafts">مشغولات يدوية</option>
                                <option value="gym">صالات رياضية</option>
                                <option value="cosmetics">مستحضرات تجميل</option>
                                <option value="detergents">منظفات</option>
                                <option value="lawyers">محامون</option>
                                <option value="driver">سائق</option>
                                <option value="documents">تصوير مستندات</option>
                                <option value="dj">فراشه و صوتيات DJ</option>
                                <option value="cleaning">خدمات التنظيف</option>
                                <option value="mills">مكن طحين و تبييض</option>
                            </select>
                            <div class="form-error">يرجى اختيار القسم الرئيسي</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">التخصص الفرعي</label>
                            <select class="form-select" id="subCategory" required disabled>
                                <option value="">اختر التخصص الفرعي</option>
                            </select>
                            <div class="form-error">يرجى اختيار التخصص الفرعي</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">وصف الخدمات</label>
                            <textarea class="form-textarea" required></textarea>
                            <div class="form-error">يرجى إدخال وصف للخدمات</div>
                        </div>
                    </div>
                </div>

                <!-- Documents -->
                <div class="form-section" data-section="4">
                    <h2 class="section-title">
                        <i class="fas fa-file-alt"></i>
                        الوثائق والشهادات
                    </h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label required-field">صورة الهوية</label>
                            <div class="file-upload">
                                <i class="fas fa-id-card"></i>
                                <div class="file-upload-text">
                                    <p>اسحب وأفلت الملف هنا أو انقر للاختيار</p>
                                    <small>JPG, PNG, PDF - الحد الأقصى 5MB</small>
                                </div>
                                <input type="file" accept=".jpg,.jpeg,.png,.pdf" required>
                            </div>
                            <div class="uploaded-files"></div>
                            <div class="form-error">يرجى رفع صورة الهوية</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required-field">السجل التجاري</label>
                            <div class="file-upload">
                                <i class="fas fa-file-contract"></i>
                                <div class="file-upload-text">
                                    <p>اسحب وأفلت الملف هنا أو انقر للاختيار</p>
                                    <small>JPG, PNG, PDF - الحد الأقصى 5MB</small>
                                </div>
                                <input type="file" accept=".jpg,.jpeg,.png,.pdf">
                            </div>
                            <div class="uploaded-files"></div>
                            <div class="form-error">يرجى رفع السجل التجاري</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label"> الشهادات المهنية او صور من  سابقة اعمالك</label>
                            <div class="file-upload">
                                <i class="fas fa-certificate"></i>
                                <div class="file-upload-text">
                                    <p>اسحب وأفلت الملف هنا أو انقر للاختيار</p>
                                    <small>JPG, PNG, PDF - الحد الأقصى 5MB</small>
                                </div>
                                <input type="file" accept=".jpg,.jpeg,.png,.pdf" multiple>
                            </div>
                            <div class="uploaded-files"></div>
                        </div>
                    </div>
                </div>

                <!-- Form Navigation -->
                <div class="form-navigation">
                    <button type="button" class="nav-btn prev-btn" disabled>
                        <i class="fas fa-arrow-right"></i>
                        السابق
                    </button>
                    <button type="button" class="nav-btn next-btn">
                        التالي
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </form>

            <div class="login-link">
                لديك حساب بالفعل؟ <a href="/login">تسجيل الدخول</a>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registerForm');
            const sections = document.querySelectorAll('.form-section');
            const steps = document.querySelectorAll('.progress-step');
            const progressFill = document.querySelector('.progress-fill');
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            let currentStep = 1;

            // تحديث شريط التقدم
            function updateProgress() {
                const progress = ((currentStep - 1) / (sections.length - 1)) * 100;
                progressFill.style.width = `${progress}%`;

                steps.forEach((step, index) => {
                    if (index + 1 < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index + 1 === currentStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });

                prevBtn.disabled = currentStep === 1;
                nextBtn.textContent = currentStep === sections.length ? 'تسجيل' : 'التالي';
            }

            // التنقل بين الخطوات
            function navigateToStep(step) {
                sections.forEach(section => {
                    section.classList.remove('active');
                    if (section.dataset.section == step) {
                        section.classList.add('active');
                    }
                });
                currentStep = step;
                updateProgress();
            }

            // التحقق من صحة البريد الإلكتروني
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            // التحقق من صحة رقم الجوال
            function validatePhone(phone) {
                // إزالة أي مسافات أو رموز غير ضرورية
                phone = phone.replace(/\s+/g, '');
                
                // التحقق من الأرقام الأرضية (تبدأ بـ 02 أو 03 أو 04 أو 05)
                const landlineRegex = /^(0[2-5])\d{8}$/;
                
                // التحقق من أرقام الموبايل (تبدأ بـ 01)
                const mobileRegex = /^(01)[0-2,5]{1}[0-9]{8}$/;
                
                // التحقق من الأرقام الدولية (تبدأ بـ +20)
                const internationalRegex = /^\+20(1)[0-2,5]{1}[0-9]{8}$/;
                
                return landlineRegex.test(phone) || mobileRegex.test(phone) || internationalRegex.test(phone);
            }

            // التحقق من صحة كلمة المرور
            function validatePassword(password) {
                // 8 أحرف على الأقل، حرف كبير، حرف صغير، رقم
                const re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;
                return re.test(password);
            }

            // التحقق من صحة السجل التجاري
            function validateCR(cr) {
                const re = /^\d{10}$/;
                return re.test(cr);
            }

            // التحقق من صحة الموقع الإلكتروني
            function validateWebsite(url) {
                if (!url) return true; // اختياري
                const re = /^(https?:\/\/)?(www\.)?[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
                return re.test(url);
            }

            // التحقق من صحة الاسم العربي
            function validateArabicName(name) {
                // يتحقق من أن الاسم يحتوي على أحرف عربية فقط
                const re = /^[\u0600-\u06FF\s]+$/;
                return re.test(name);
            }

            // التحقق من صحة الحقول
            function validateStep(step) {
                const currentSection = document.querySelector(`.form-section[data-section="${step}"]`);
                const inputs = currentSection.querySelectorAll('input[required], select[required], textarea[required]');
                let isValid = true;

                inputs.forEach(input => {
                    const formGroup = input.closest('.form-group');
                    const errorElement = formGroup.querySelector('.form-error');
                    let fieldError = '';

                    // إزالة حالة الخطأ السابقة
                    formGroup.classList.remove('error');

                    // التحقق من الحقول المطلوبة
                    if (!input.value.trim()) {
                        fieldError = 'هذا الحقل مطلوب';
                    } else {
                        // التحقق من نوع الحقل
                        switch (input.type) {
                            case 'text':
                                // التحقق من الاسم الكامل
                                if (input.id === 'fullName') {
                                    if (!validateArabicName(input.value)) {
                                        fieldError = 'يرجى إدخال الاسم باللغة العربية فقط';
                                    } else if (input.value.length < 3) {
                                        fieldError = 'يجب أن يكون الاسم 3 أحرف على الأقل';
                                    }
                                }
                                break;
                            case 'email':
                                if (!validateEmail(input.value)) {
                                    fieldError = 'يرجى إدخال بريد إلكتروني صحيح';
                                }
                                break;
                            case 'tel':
                                if (!validatePhone(input.value)) {
                                    fieldError = 'يرجى إدخال رقم هاتف صحيح (أرضي أو محمول)';
                                }
                                break;
                            case 'password':
                                if (!validatePassword(input.value)) {
                                    fieldError = 'كلمة المرور يجب أن تحتوي على 8 أحرف على الأقل، حرف كبير، حرف صغير، ورقم';
                                }
                                break;
                            case 'url':
                                if (!validateWebsite(input.value)) {
                                    fieldError = 'يرجى إدخال رابط موقع صحيح';
                                }
                                break;
                        }

                        // التحقق من السجل التجاري
                        if (input.id === 'cr') {
                            if (!validateCR(input.value)) {
                                fieldError = 'يرجى إدخال رقم سجل تجاري صحيح (10 أرقام)';
                            }
                        }

                        // التحقق من تطابق كلمات المرور
                        if (input.id === 'confirmPassword') {
                            const password = document.getElementById('password');
                            if (input.value !== password.value) {
                                fieldError = 'كلمات المرور غير متطابقة';
                            }
                        }
                    }

                    // عرض رسالة الخطأ إذا وجدت
                    if (fieldError) {
                        formGroup.classList.add('error');
                        errorElement.textContent = fieldError;
                        isValid = false;
                    }
                });

                // التحقق من الملفات المطلوبة
                const fileInputs = currentSection.querySelectorAll('input[type="file"][required]');
                fileInputs.forEach(input => {
                    const formGroup = input.closest('.form-group');
                    const errorElement = formGroup.querySelector('.form-error');
                    
                    if (!input.files.length) {
                        formGroup.classList.add('error');
                        errorElement.textContent = 'يرجى رفع الملف المطلوب';
                        isValid = false;
                    } else {
                        // التحقق من حجم الملف
                        const file = input.files[0];
                        if (file.size > 5 * 1024 * 1024) {
                            formGroup.classList.add('error');
                            errorElement.textContent = 'حجم الملف يجب أن لا يتجاوز 5MB';
                            isValid = false;
                        }
                    }
                });

                return isValid;
            }

            // التنقل للأمام
            nextBtn.addEventListener('click', () => {
                if (validateStep(currentStep)) {
                    if (currentStep < sections.length) {
                        navigateToStep(currentStep + 1);
                    } else {
                        // إرسال النموذج
                        form.submit();
                    }
                } else {
                    // تمرير إلى أول حقل خطأ
                    const firstError = document.querySelector('.form-group.error');
                    if (firstError) {
                        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        firstError.querySelector('input, select, textarea').focus();
                    }
                }
            });

            // التنقل للخلف
            prevBtn.addEventListener('click', () => {
                if (currentStep > 1) {
                    navigateToStep(currentStep - 1);
                }
            });

            // التحقق المباشر من الحقول عند الكتابة
            document.querySelectorAll('input, select, textarea').forEach(input => {
                input.addEventListener('input', function() {
                    const formGroup = this.closest('.form-group');
                    if (formGroup.classList.contains('error')) {
                        validateStep(currentStep);
                    }
                });
            });

            // إظهار/إخفاء كلمة المرور
            document.querySelectorAll('.password-toggle').forEach(toggle => {
                toggle.addEventListener('change', function() {
                    const input = this.closest('.form-group').querySelector('input[type="password"]');
                    input.type = this.checked ? 'text' : 'password';
                });
            });

            // تحديد الموقع الجغرافي
            const locationBtn = document.getElementById('getLocation');
            const locationInput = document.getElementById('location');
            const locationStatus = document.getElementById('locationStatus');
            const latitudeInput = document.getElementById('latitude');
            const longitudeInput = document.getElementById('longitude');

            locationBtn.addEventListener('click', async () => {
                if (!navigator.geolocation) {
                    locationStatus.textContent = 'متصفحك لا يدعم خدمة تحديد الموقع';
                    locationStatus.style.color = 'var(--error)';
                    return;
                }

                // تحديث حالة الزر وحالة التحميل
                locationBtn.disabled = true;
                locationBtn.classList.add('loading');
                locationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري التحديد...';
                locationStatus.textContent = 'جاري تحديد موقعك...';
                locationStatus.style.color = 'var(--info)';

                try {
                    const position = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject, {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 0
                        });
                    });

                    const { latitude, longitude } = position.coords;
                    
                    // تخزين الإحداثيات في الحقول المخفية
                    latitudeInput.value = latitude;
                    longitudeInput.value = longitude;
                    
                    try {
                        // استخدام Google Maps Geocoding API
                        const response = await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=YOUR_API_KEY&language=ar`);
                        if (!response.ok) {
                            throw new Error('فشل في الحصول على العنوان');
                        }
                        
                        const data = await response.json();
                        
                        if (data.results && data.results.length > 0) {
                            // البحث عن العنوان الأكثر تفصيلاً
                            const addressComponents = data.results[0].address_components;
                            let streetNumber = '';
                            let route = '';
                            let locality = '';
                            let administrativeArea = '';
                            
                            addressComponents.forEach(component => {
                                if (component.types.includes('street_number')) {
                                    streetNumber = component.long_name;
                                } else if (component.types.includes('route')) {
                                    route = component.long_name;
                                } else if (component.types.includes('locality')) {
                                    locality = component.long_name;
                                } else if (component.types.includes('administrative_area_level_1')) {
                                    administrativeArea = component.long_name;
                                }
                            });

                            // بناء العنوان بشكل منظم
                            const formattedAddress = [
                                streetNumber,
                                route,
                                locality,
                                administrativeArea
                            ].filter(Boolean).join('، ');

                            locationInput.value = formattedAddress;
                            locationStatus.textContent = 'تم تحديد موقعك بنجاح';
                            locationStatus.style.color = 'var(--success)';
                            locationInput.closest('.form-group').classList.remove('error');
                        } else {
                            throw new Error('لم يتم العثور على عنوان');
                        }
                    } catch (error) {
                        console.error('خطأ في الحصول على العنوان:', error);
                        // استخدام OpenStreetMap كبديل
                        try {
                            const osmResponse = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&accept-language=ar`);
                            const osmData = await osmResponse.json();
                            
                            if (osmData.display_name) {
                                const addressParts = osmData.display_name.split(',');
                                const shortAddress = addressParts.slice(0, 3).join(',');
                                locationInput.value = shortAddress;
                                locationStatus.textContent = 'تم تحديد الموقع بنجاح (عنوان تقريبي)';
                                locationStatus.style.color = 'var(--warning)';
                            } else {
                                throw new Error('لم يتم العثور على عنوان');
                            }
                        } catch (osmError) {
                            locationInput.value = 'موقع محدد';
                            locationStatus.textContent = 'تم تحديد الموقع ولكن لم نتمكن من الحصول على العنوان';
                            locationStatus.style.color = 'var(--warning)';
                        }
                    }
                } catch (error) {
                    console.error('خطأ في تحديد الموقع:', error);
                    let errorMessage = 'حدث خطأ في تحديد الموقع';
                    
                    switch (error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage = 'يرجى السماح بالوصول إلى موقعك في إعدادات المتصفح';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage = 'معلومات الموقع غير متوفرة حالياً';
                            break;
                        case error.TIMEOUT:
                            errorMessage = 'انتهت مهلة طلب الموقع، يرجى المحاولة مرة أخرى';
                            break;
                    }
                    
                    locationStatus.textContent = errorMessage;
                    locationStatus.style.color = 'var(--error)';
                } finally {
                    // إعادة تعيين حالة الزر
                    locationBtn.disabled = false;
                    locationBtn.classList.remove('loading');
                    locationBtn.innerHTML = '<i class="fas fa-location-arrow"></i> <span>تحديد الموقع</span>';
                }
            });

            // معالجة رفع الملفات
            document.querySelectorAll('.file-upload').forEach(upload => {
                const input = upload.querySelector('input');
                const uploadedFiles = upload.nextElementSibling;

                input.addEventListener('change', function() {
                    const files = Array.from(this.files);
                    const formGroup = this.closest('.form-group');
                    
                    files.forEach(file => {
                        if (file.size > 5 * 1024 * 1024) {
                            formGroup.classList.add('error');
                            formGroup.querySelector('.form-error').textContent = 'حجم الملف يجب أن لا يتجاوز 5MB';
                            return;
                        }

                        const fileItem = document.createElement('div');
                        fileItem.className = 'file-item';
                        fileItem.innerHTML = `
                            <i class="fas fa-file"></i>
                            <span>${file.name}</span>
                            <i class="fas fa-times remove-file"></i>
                        `;

                        fileItem.querySelector('.remove-file').addEventListener('click', () => {
                            fileItem.remove();
                            input.value = '';
                            formGroup.classList.remove('error');
                        });

                        uploadedFiles.appendChild(fileItem);
                        formGroup.classList.remove('error');
                    });
                });
            });

            // مراقب قوة كلمة المرور
            const passwordInput = document.getElementById('password');
            const requirements = {
                length: document.getElementById('length-check'),
                uppercase: document.getElementById('uppercase-check'),
                lowercase: document.getElementById('lowercase-check'),
                number: document.getElementById('number-check')
            };

            passwordInput.addEventListener('input', function() {
                const password = this.value;
                
                // التحقق من الطول
                if (password.length >= 8) {
                    requirements.length.classList.add('valid');
                    requirements.length.classList.remove('invalid');
                    requirements.length.querySelector('i').className = 'fas fa-check-circle';
                } else {
                    requirements.length.classList.add('invalid');
                    requirements.length.classList.remove('valid');
                    requirements.length.querySelector('i').className = 'fas fa-times-circle';
                }

                // التحقق من الحرف الكبير
                if (/[A-Z]/.test(password)) {
                    requirements.uppercase.classList.add('valid');
                    requirements.uppercase.classList.remove('invalid');
                    requirements.uppercase.querySelector('i').className = 'fas fa-check-circle';
                } else {
                    requirements.uppercase.classList.add('invalid');
                    requirements.uppercase.classList.remove('valid');
                    requirements.uppercase.querySelector('i').className = 'fas fa-times-circle';
                }

                // التحقق من الحرف الصغير
                if (/[a-z]/.test(password)) {
                    requirements.lowercase.classList.add('valid');
                    requirements.lowercase.classList.remove('invalid');
                    requirements.lowercase.querySelector('i').className = 'fas fa-check-circle';
                } else {
                    requirements.lowercase.classList.add('invalid');
                    requirements.lowercase.classList.remove('valid');
                    requirements.lowercase.querySelector('i').className = 'fas fa-times-circle';
                }

                // التحقق من الرقم
                if (/\d/.test(password)) {
                    requirements.number.classList.add('valid');
                    requirements.number.classList.remove('invalid');
                    requirements.number.querySelector('i').className = 'fas fa-check-circle';
                } else {
                    requirements.number.classList.add('invalid');
                    requirements.number.classList.remove('valid');
                    requirements.number.querySelector('i').className = 'fas fa-times-circle';
                }
            });

            // إضافة كود JavaScript للتعامل مع التصنيفات
            const mainCategory = document.getElementById('mainCategory');
            const subCategory = document.getElementById('subCategory');
            
            const categories = {
                food: ['مطاعم', 'سوبر ماركت', 'بقالة', 'خضراوات', 'فواكه', 'حلواني', 'جزارة', 'دواجن', 'مخابز', 'أسماك', 'أكل بيتي', 'طباخين أفراح'],
                clothes: ['رجالي', 'حريمي', 'أطفال', 'فساتين'],
                photography: ['سيشنات و حفلات', 'استديوهات'],
                maintenance: ['موبايل', 'كمبيوتر', 'تكييف', 'غسالات', 'ثلاجات', 'أجهزة كهربائية'],
                education: ['حضانات', 'حساب ذهبي', 'مرحلة ابتدائية', 'مرحلة إعدادية', 'ثانوية عامة', 'ثانوية تجارية', 'ثانوية صناعية', 'ثانوية زراعية', 'مواد شرعية', 'تحفيظ قرآن'],
                wedding: ['باقات ورد', 'مستلزمات طعام', 'طباعة دعوات أفراح', 'تأجير قاعات', 'مصورين الافراح', 'كيك وزينة زفاف', 'فساتين الزفاف', 'بدلات الزفاف', 'خدمات الديكور', 'تأجير السيارات للأفراح', 'طباخين أفراح'],
                medical: ['الطب البشرى', 'الأسنان', 'الجلدية والتجميل', 'العيون', 'النساء والتوليد', 'الأطفال', 'الأنف والأذن والحنجرة', 'الطب النفسي', 'الطب الباطني', 'جراحة عامة', 'جراحة تجميلية', 'التخدير', 'الطب الرياضي', 'الطب البديل', 'الأورام', 'الصحة النفسية', 'الطب الوقائي', 'طب الطوارئ', 'صيدليات', 'معامل تحاليل', 'تمريض منزلي'],
                craftsman: ['نجار', 'سباك', 'حداد', 'نقاش', 'كهربائي'],
                driver: ['سياره خاصه', 'توكتوك', 'تروسيكل', 'عربيه نقل'],
                cleaning: ['تنظيف منازل', 'تنظيف مكاتب', 'تنظيف سيارات']
            };

            mainCategory.addEventListener('change', function() {
                const selectedCategory = this.value;
                subCategory.innerHTML = '<option value="">اختر التخصص الفرعي</option>';
                
                if (selectedCategory && categories[selectedCategory]) {
                    categories[selectedCategory].forEach(sub => {
                        const option = document.createElement('option');
                        option.value = sub;
                        option.textContent = sub;
                        subCategory.appendChild(option);
                    });
                    subCategory.disabled = false;
                } else {
                    subCategory.disabled = true;
                }
            });
        });
    </script>
</body>

</html> 